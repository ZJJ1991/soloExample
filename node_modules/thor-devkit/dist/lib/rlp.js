"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const bignumber_js_1 = require("bignumber.js");
const rlp = require('rlp');
class RLP {
    constructor(profile) {
        this.profile = profile;
    }
    /**
     * encode data according to profile
     * @param data the structured data to be encoded
     */
    encode(data) {
        const packed = pack(data, this.profile, '');
        return rlp.encode(packed);
    }
    /**
     * decode buffer according to profile
     * @param buf rlp encoded data
     */
    decode(buf) {
        const packed = rlp.decode(buf);
        return unpack(packed, this.profile, '');
    }
}
exports.RLP = RLP;
(function (RLP) {
    /** base class of scalar kind */
    class ScalarKind {
        constructor() { }
    }
    RLP.ScalarKind = ScalarKind;
    /** a noop scalar kind */
    class RawKind extends ScalarKind {
        constructor() { super(); }
        encode(data, ctx) {
            return data;
        }
        decode(buf, ctx) {
            return buf;
        }
    }
    RLP.RawKind = RawKind;
    /** a scalar kind to presents number */
    class NumericKind extends ScalarKind {
        /**
         * create a numeric kind
         * @param maxBytes up limit of data in bytes
         */
        constructor(maxBytes) {
            super();
            this.maxBytes = maxBytes;
        }
        encode(data, ctx) {
            assert(typeof data === 'string' || typeof data === 'number', ctx, 'expected string or number');
            if (typeof data === 'string') {
                assert(isHexString(data), ctx, 'expected non-negative integer in hex string');
                assert(data.length > 2, ctx, 'expected valid hex string');
            }
            else {
                assert(Number.isSafeInteger(data) && data >= 0, ctx, 'expected non-negative safe integer');
            }
            const bn = new bignumber_js_1.BigNumber(data);
            if (bn.isZero()) {
                return Buffer.alloc(0);
            }
            let hex = bn.toString(16);
            if (hex.length % 2 !== 0) {
                hex = '0' + hex;
            }
            const buf = Buffer.from(hex, 'hex');
            assert(this.maxBytes ? buf.length <= this.maxBytes : true, ctx, `expected number in ${this.maxBytes} bytes`);
            return buf;
        }
        decode(buf, ctx) {
            assert(this.maxBytes ? buf.length <= this.maxBytes : true, ctx, `expected less than ${this.maxBytes} bytes`);
            if (buf.length === 0) {
                return 0;
            }
            assert(buf[0] !== 0, ctx, `expected canonical integer (no leading zero bytes)`);
            const bn = new bignumber_js_1.BigNumber(buf.toString('hex'), 16);
            const num = bn.toNumber();
            return Number.isSafeInteger(num) ? num : '0x' + bn.toString(16);
        }
    }
    RLP.NumericKind = NumericKind;
    /** a scalar kind to present fixed length blob */
    class BlobKind extends ScalarKind {
        /**
         * create blob kind
         * @param bytes size of blob in bytes
         */
        constructor(bytes) {
            super();
            this.bytes = bytes;
        }
        encode(data, ctx) {
            assert(isHexString(data), ctx, 'expected hex string');
            assert(data.length === this.bytes * 2 + 2, ctx, `expected hex string presents ${this.bytes} bytes`);
            return Buffer.from(data.slice(2), 'hex');
        }
        decode(buf, ctx) {
            assert(buf.length === this.bytes, ctx, `expected ${this.bytes} bytes`);
            return '0x' + buf.toString('hex');
        }
    }
    RLP.BlobKind = BlobKind;
    /** blob kind that can be null */
    class NullableBlobKind extends BlobKind {
        encode(data, ctx) {
            if (data) {
                return super.encode(data, ctx);
            }
            return Buffer.alloc(0);
        }
        decode(buf, ctx) {
            if (buf.length === 0) {
                return null;
            }
            return super.decode(buf, ctx);
        }
    }
    RLP.NullableBlobKind = NullableBlobKind;
    /** a blob kind that leading zero will be removed when encoded */
    class TrimmedBlobKind extends BlobKind {
        encode(data, ctx) {
            const buf = super.encode(data, ctx);
            const nzIndex = buf.findIndex(v => v !== 0);
            if (nzIndex >= 0) {
                return buf.slice(nzIndex);
            }
            return Buffer.alloc(0);
        }
        decode(buf, ctx) {
            assert(buf.length <= this.bytes, ctx, `expected less than ${this.bytes} bytes`);
            const zeros = '0'.repeat((this.bytes - buf.length) * 2);
            return '0x' + zeros + buf.toString('hex');
        }
    }
    RLP.TrimmedBlobKind = TrimmedBlobKind;
    /** a blob kind with variable length */
    class VariableBlobKind extends BlobKind {
        constructor(maxBytes) {
            if (maxBytes) {
                super(maxBytes);
            }
            else {
                super(Number.MAX_SAFE_INTEGER);
            }
        }
        encode(data, ctx) {
            assert(isHexString(data), ctx, 'expected hex string');
            assert(data.length % 2 === 0, ctx, 'expected even length hex');
            const buf = Buffer.from(data.slice(2), 'hex');
            assert(buf.length <= this.bytes, ctx, `expected less than ${this.bytes} bytes`);
            return buf;
        }
        decode(buf, ctx) {
            assert(buf.length <= this.bytes, ctx, `expected less than ${this.bytes} bytes`);
            return '0x' + buf.toString('hex');
        }
    }
    RLP.VariableBlobKind = VariableBlobKind;
})(RLP = exports.RLP || (exports.RLP = {}));
function pack(obj, profile, ctx) {
    ctx = ctx ? ctx + '.' + profile.name : profile.name;
    const kind = profile.kind;
    if (kind instanceof RLP.ScalarKind) {
        return kind.encode(obj, ctx);
    }
    if (Array.isArray(kind)) {
        return kind.map(k => pack(obj[k.name], k, ctx));
    }
    assert(Array.isArray(obj), ctx, 'expected array');
    const item = kind.item;
    return obj.map((part, i) => pack(part, { name: '#' + i, kind: item }, ctx));
}
function unpack(packed, profile, ctx) {
    ctx = ctx ? ctx + '.' + profile.name : profile.name;
    const kind = profile.kind;
    if (kind instanceof RLP.ScalarKind) {
        if (!(kind instanceof RLP.RawKind)) {
            assert(Buffer.isBuffer(packed), ctx, 'expected Buffer');
        }
        return kind.decode(packed, ctx);
    }
    if (Array.isArray(kind)) {
        assert(Array.isArray(packed), ctx, 'expected array');
        const parts = packed;
        assert(parts.length === kind.length, ctx, `expected ${kind.length} items, but got ${parts.length}`);
        return kind.reduce((o, p, i) => {
            o[p.name] = unpack(parts[i], p, ctx);
            return o;
        }, {});
    }
    assert(Array.isArray(packed), ctx, 'expected array');
    const item = kind.item;
    return packed.map((part, i) => unpack(part, { name: '#' + i, kind: item }, ctx));
}
function assert(cond, ctx, msg) {
    if (!cond) {
        throw new Error(`${ctx}: ${msg}`);
    }
}
function isHexString(str) {
    return /^0x[0-9a-f]*$/i.test(str);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmxwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xpYi9ybHAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQ0FBd0M7QUFDeEMsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBRTFCO0lBQ0ksWUFBcUIsT0FBb0I7UUFBcEIsWUFBTyxHQUFQLE9BQU8sQ0FBYTtJQUFJLENBQUM7SUFFOUM7OztPQUdHO0lBQ0ksTUFBTSxDQUFDLElBQVM7UUFDbkIsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFBO1FBQzNDLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQVcsQ0FBQTtJQUN2QyxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ksTUFBTSxDQUFDLEdBQVc7UUFDckIsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUM5QixPQUFPLE1BQU0sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQTtJQUMzQyxDQUFDO0NBQ0o7QUFwQkQsa0JBb0JDO0FBRUQsV0FBaUIsR0FBRztJQUNoQixnQ0FBZ0M7SUFDaEM7UUFDSSxnQkFBMEIsQ0FBQztLQUc5QjtJQUpxQixjQUFVLGFBSS9CLENBQUE7SUFFRCx5QkFBeUI7SUFDekIsYUFBcUIsU0FBUSxVQUFVO1FBQ25DLGdCQUFnQixLQUFLLEVBQUUsQ0FBQSxDQUFDLENBQUM7UUFFbEIsTUFBTSxDQUFDLElBQVMsRUFBRSxHQUFXO1lBQ2hDLE9BQU8sSUFBSSxDQUFBO1FBQ2YsQ0FBQztRQUNNLE1BQU0sQ0FBQyxHQUFRLEVBQUUsR0FBVztZQUMvQixPQUFPLEdBQUcsQ0FBQTtRQUNkLENBQUM7S0FDSjtJQVRZLFdBQU8sVUFTbkIsQ0FBQTtJQUVELHVDQUF1QztJQUN2QyxpQkFBeUIsU0FB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